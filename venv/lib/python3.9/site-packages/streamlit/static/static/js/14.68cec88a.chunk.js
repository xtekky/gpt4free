"use strict";(self.webpackChunkstreamlit_browser=self.webpackChunkstreamlit_browser||[]).push([[14],{28014:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var i=n(1413),a=n(15671),r=n(43144),o=n(97326),l=n(60136),s=n(29388),u=n(47313),d=n(16031),m=n(78947),h=n(83985),c=n(17076),f=n(46332),p=n(7976),g=n(64243),b=n(70816),v=n.n(b),y=n(65167),T=n(73290),R=n(80213),V=n(47167),k=n(2120),x=(0,V.Z)("div",{target:"e88czh83"})((function(e){var t=e.disabled,n=e.theme;return{alignItems:"center",backgroundColor:t?n.colors.gray:n.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",height:n.radii.xl,justifyContent:"center",width:n.radii.xl,":focus":{boxShadow:"0 0 0 0.2rem ".concat((0,k.DZ)(n.colors.primary,.5)),outline:"none"}}}),""),w=(0,V.Z)("div",{target:"e88czh82"})((function(e){var t=e.disabled,n=e.theme;return{fontFamily:n.fonts.monospace,fontSize:n.fontSizes.sm,paddingBottom:n.spacing.twoThirdsSmFont,color:t?n.colors.gray:n.colors.primary,top:"-22px",position:"absolute",whiteSpace:"nowrap",backgroundColor:n.colors.transparent,lineHeight:n.lineHeights.base,fontWeight:"normal"}}),""),S=(0,V.Z)("div",{target:"e88czh81"})((function(e){var t=e.theme;return{paddingBottom:t.spacing.none,paddingLeft:t.spacing.none,paddingRight:t.spacing.none,paddingTop:t.spacing.twoThirdsSmFont,justifyContent:"space-between",alignItems:"center",display:"flex"}}),""),C=(0,V.Z)("div",{target:"e88czh80"})((function(e){var t=e.disabled,n=e.theme;return{lineHeight:n.lineHeights.base,fontWeight:"normal",fontSize:n.fontSizes.sm,fontFamily:n.fonts.monospace,color:t?n.colors.fadedText40:"inherit"}}),""),D=n(46417),B=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).formClearHelper=new f.Kz,r.state=void 0,r.sliderRef=u.createRef(),r.thumbRef=[],r.thumbValueRef=[],r.commitWidgetValueDebounced=void 0,r.commitWidgetValue=function(e){r.props.widgetMgr.setDoubleArrayValue(r.props.element,r.state.value,e)},r.onFormCleared=function(){r.setState((function(e,t){return{value:t.element.default}}),(function(){return r.commitWidgetValue({fromUi:!0})}))},r.handleChange=function(e){var t=e.value;r.setState({value:t},(function(){return r.commitWidgetValueDebounced({fromUi:!0})}))},r.renderThumb=u.forwardRef((function(e,t){var n,a=e.$value,o=e.$thumbIndex,l=o||0;r.thumbRef[l]=t,(n=r.thumbValueRef)[l]||(n[l]=u.createRef());var s=a?r.formatValue(a[o]):"",m=(0,d.pick)(e,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]);return r.props.element.options.length>0||r.isDateTimeType(),r.thumbValueAlignment(r.thumbRef[l].current,r.thumbValueRef[l].current),(0,D.jsx)(x,(0,i.Z)((0,i.Z)({},m),{},{disabled:!0===e.$disabled,ref:r.thumbRef[l],"aria-valuetext":s,"aria-label":r.props.element.label,children:(0,D.jsx)(w,{className:"StyledThumbValue","data-testid":"stThumbValue",disabled:!0===e.$disabled,ref:r.thumbValueRef[l],children:s})}))})),r.renderTickBar=function(){var e=r.props,t=e.disabled,n=e.element,i=n.max,a=n.min;return(0,D.jsxs)(S,{"data-testid":"stTickBar",children:[(0,D.jsx)(C,{disabled:t,"data-testid":"stTickBarMin",children:r.formatValue(a)}),(0,D.jsx)(C,{disabled:t,"data-testid":"stTickBarMax",children:r.formatValue(i)})]})},r.commitWidgetValueDebounced=(0,g.Ds)(200,r.commitWidgetValue.bind((0,o.Z)(r))),r.state={value:r.initialValue},r}return(0,r.Z)(n,[{key:"initialValue",get:function(){var e=this.props.widgetMgr.getDoubleArrayValue(this.props.element);return void 0!==e?e:this.props.element.default}},{key:"componentDidMount",value:function(){for(var e=0;e<Math.min(this.thumbRef.length,this.thumbValueRef.length);e++)this.thumbValueAlignment(this.thumbRef[e].current,this.thumbValueRef[e].current);this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}},{key:"componentDidUpdate",value:function(){this.maybeUpdateFromProtobuf()}},{key:"componentWillUnmount",value:function(){this.formClearHelper.disconnect()}},{key:"maybeUpdateFromProtobuf",value:function(){this.props.element.setValue&&this.updateFromProtobuf()}},{key:"updateFromProtobuf",value:function(){var e=this,t=this.props.element.value;this.props.element.setValue=!1,this.setState({value:t},(function(){e.commitWidgetValue({fromUi:!1})}))}},{key:"value",get:function(){var e=this.props.element,t=e.min,n=e.max,i=this.state.value,a=i[0],r=i.length>1?i[1]:i[0];return a>r&&(a=r),a<t&&(a=t),a>n&&(a=n),r<t&&(r=t),r>n&&(r=n),i.length>1?[a,r]:[a]}},{key:"isDateTimeType",value:function(){var e=this.props.element.dataType;return e===p.iR.DataType.DATETIME||e===p.iR.DataType.DATE||e===p.iR.DataType.TIME}},{key:"formatValue",value:function(e){var t=this.props.element,n=t.format,i=t.options;return this.isDateTimeType()?v().utc(e/1e3).format(n):i.length>0?(0,c.sprintf)(n,i[e]):(0,c.sprintf)(n,e)}},{key:"thumbValueAlignment",value:function(e,t){var n=this.sliderRef.current;if(n&&e&&t){var i=n.getBoundingClientRect(),a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=a.left+a.width/2,l=o-r.width/2<i.left,s=o+r.width/2>i.right;t.style.left=l?"0":"",t.style.right=s?"0":""}}},{key:"render",value:function(){var e,t=this.props,n=t.disabled,a=t.element,r=t.theme,o=t.width,l=t.widgetMgr,s=r.colors,u=r.fonts,d=r.fontSizes,h=r.spacing,c={width:o};return this.formClearHelper.manageFormClearListener(l,a.formId,this.onFormCleared),(0,D.jsxs)("div",{ref:this.sliderRef,className:"stSlider",style:c,children:[(0,D.jsx)(y.ON,{label:a.label,disabled:n,labelVisibility:(0,g.iF)(null===(e=a.labelVisibility)||void 0===e?void 0:e.value),children:a.help&&(0,D.jsx)(y.dT,{children:(0,D.jsx)(T.ZP,{content:a.help,placement:R.ug.TOP_RIGHT})})}),(0,D.jsx)(m.Z,{min:a.min,max:a.max,step:a.step,value:this.value,onChange:this.handleChange,disabled:n,overrides:{Root:{style:{paddingTop:h.twoThirdsSmFont}},Thumb:this.renderThumb,Tick:{style:{fontFamily:u.monospace,fontSize:d.sm}},Track:{style:{backgroundColor:"none !important",paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:h.twoThirdsSmFont}},InnerTrack:{style:function(e){var t=e.$disabled;return(0,i.Z)({height:"4px"},t?{background:s.darkenedBgMix25}:{})}},TickBar:this.renderTickBar}})]})}}]),n}(u.PureComponent),F=(0,h.b)(B)}}]);