"use strict";(self.webpackChunkstreamlit_browser=self.webpackChunkstreamlit_browser||[]).push([[871],{75006:function(e,t,n){n.d(t,{Z:function(){return m}});n(47313);var r,o=n(64243),i=n(65167),a=n(1413),s=n(30168),l=n(47167),u=(0,n(30686).F4)(r||(r=(0,s.Z)(["\n  50% {\n    color: rgba(0, 0, 0, 0);\n  }\n"]))),c=(0,l.Z)("span",{target:"e1m4n6jn0"})((function(e){var t=e.includeDot,n=e.shouldBlink,r=e.theme;return(0,a.Z)((0,a.Z)({},t?{"&::before":{opacity:1,content:'"\u2022"',animation:"none",color:r.colors.gray,margin:"0 5px"}}:{}),n?{color:r.colors.red,animationName:"".concat(u),animationDuration:"0.5s",animationIterationCount:5}:{})}),""),d=n(46417),m=function(e){var t=e.dirty,n=e.value,r=e.maxLength,a=e.className,s=e.type,l=[],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l.push((0,d.jsx)(c,{includeDot:l.length>0,shouldBlink:t,children:e},l.length))};return t&&("multiline"===(void 0===s?"single":s)?(0,o.Ge)()?u("Press \u2318+Enter to apply"):u("Press Ctrl+Enter to apply"):u("Press Enter to apply")),r&&u("".concat(n.length,"/").concat(r),t&&n.length>=r),(0,d.jsx)(i.X7,{className:a,children:l})}},92871:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(15671),o=n(43144),i=n(60136),a=n(29388),s=n(47313),l=n(66946),u=n(99055),c=n(17076),d=n(46332),m=n(72599),p=n(7976),f=n(73290),h=n(80213),g=n(49089),b=n(3208),y=n(75006),v=n(65167),x=n(64243),w=n(47167);var V=(0,w.Z)("div",{target:"e1jwn65y3"})((function(e){var t=e.theme;return{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:t.colors.widgetBorderColor||t.colors.widgetBackgroundColor||t.colors.bgColor,transitionDuration:"200ms",transitionProperty:"border",transitionTimingFunction:"cubic-bezier(0.2, 0.8, 0.4, 1)",borderRadius:t.radii.md,overflow:"hidden","&.focused":{borderColor:t.colors.primary},input:{MozAppearance:"textfield","&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:t.spacing.none}}}}),""),k=(0,w.Z)("div",{target:"e1jwn65y2"})({name:"76z9jo",styles:"display:flex;flex-direction:row;align-self:stretch"}),C=(0,w.Z)("button",{target:"e1jwn65y1"})((function(e){var t=e.theme;return{margin:t.spacing.none,border:"none",height:t.sizes.full,display:"flex",alignItems:"center",width:"".concat(32,"px"),justifyContent:"center",color:t.colors.bodyText,transition:"color 300ms, backgroundColor 300ms",backgroundColor:t.colors.widgetBackgroundColor||t.colors.secondaryBg,"&:hover:enabled, &:focus:enabled":{color:t.colors.white,backgroundColor:t.colors.primary,transition:"none",outline:"none"},"&:active":{outline:"none",border:"none"},"&:last-of-type":{borderTopRightRadius:t.radii.md,borderBottomRightRadius:t.radii.md},"&:disabled":{cursor:"not-allowed",color:t.colors.fadedText40}}}),""),D=(0,w.Z)("div",{target:"e1jwn65y0"})((function(e){return{position:"absolute",marginRight:e.theme.spacing.twoXS,left:0,right:"".concat(64,"px")}}),""),R=n(46417);var j=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).formClearHelper=new d.Kz,o.inputRef=s.createRef(),o.formatValue=function(e){var t=function(e){return null==e||""===e?void 0:e}(o.props.element.format);if(null==t)return e.toString();try{return(0,c.sprintf)(t,e)}catch(n){return(0,m.KE)("Error in sprintf(".concat(t,", ").concat(e,"): ").concat(n)),String(e)}},o.isIntData=function(){return o.props.element.dataType===p.Y2.DataType.INT},o.getMin=function(){return o.props.element.hasMin?o.props.element.min:-1/0},o.getMax=function(){return o.props.element.hasMax?o.props.element.max:1/0},o.getStep=function(){var e=o.props.element.step;return e||(o.isIntData()?1:.01)},o.commitWidgetValue=function(e){var t=o.state.value,n=o.props,r=n.element,i=n.widgetMgr,a=o.props.element,s=o.getMin(),l=o.getMax();if(s>t||t>l){var u=o.inputRef.current;u&&u.reportValidity()}else{var c=t||0===t?t:a.default;o.isIntData()?i.setIntValue(r,c,e):i.setDoubleValue(r,c,e),o.setState({dirty:!1,value:c,formattedValue:o.formatValue(c)})}},o.onFormCleared=function(){o.setState((function(e,t){return{value:t.element.default}}),(function(){return o.commitWidgetValue({fromUi:!0})}))},o.onBlur=function(){o.state.dirty&&o.commitWidgetValue({fromUi:!0}),o.setState({isFocused:!1})},o.onFocus=function(){o.setState({isFocused:!0})},o.onChange=function(e){var t,n=e.target.value;t=o.isIntData()?parseInt(n,10):parseFloat(n),o.setState({dirty:!0,value:t,formattedValue:n})},o.onKeyDown=function(e){switch(e.key){case"ArrowUp":e.preventDefault(),o.modifyValueUsingStep("increment")();break;case"ArrowDown":e.preventDefault(),o.modifyValueUsingStep("decrement")()}},o.onKeyPress=function(e){"Enter"===e.key&&o.state.dirty&&o.commitWidgetValue({fromUi:!0})},o.modifyValueUsingStep=function(e){return function(){var t=o.state.value,n=o.getStep();switch(e){case"increment":o.canIncrement&&o.setState({dirty:!0,value:t+n},(function(){o.commitWidgetValue({fromUi:!0})}));break;case"decrement":o.canDecrement&&o.setState({dirty:!0,value:t-n},(function(){o.commitWidgetValue({fromUi:!0})}))}}},o.state={dirty:!1,value:o.initialValue,formattedValue:o.formatValue(o.initialValue),isFocused:!1},o}return(0,o.Z)(n,[{key:"initialValue",get:function(){var e=this.isIntData()?this.props.widgetMgr.getIntValue(this.props.element):this.props.widgetMgr.getDoubleValue(this.props.element);return void 0!==e?e:this.props.element.default}},{key:"componentDidMount",value:function(){this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}},{key:"componentDidUpdate",value:function(){this.maybeUpdateFromProtobuf()}},{key:"componentWillUnmount",value:function(){this.formClearHelper.disconnect()}},{key:"maybeUpdateFromProtobuf",value:function(){this.props.element.setValue&&this.updateFromProtobuf()}},{key:"updateFromProtobuf",value:function(){var e=this,t=this.props.element.value;this.props.element.setValue=!1,this.setState({value:t,formattedValue:this.formatValue(t)},(function(){e.commitWidgetValue({fromUi:!1})}))}},{key:"canDecrement",get:function(){return this.state.value-this.getStep()>=this.getMin()}},{key:"canIncrement",get:function(){return this.state.value+this.getStep()<=this.getMax()}},{key:"render",value:function(){var e,t=this.props,n=t.element,r=t.width,o=t.disabled,i=t.widgetMgr,a=this.state,s=a.formattedValue,c=a.dirty,d=a.isFocused,m={width:r},p=!this.canDecrement||o,w=!this.canIncrement||o;return this.formClearHelper.manageFormClearListener(i,n.formId,this.onFormCleared),(0,R.jsxs)("div",{className:"stNumberInput",style:m,children:[(0,R.jsx)(v.ON,{label:n.label,disabled:o,labelVisibility:(0,x.iF)(null===(e=n.labelVisibility)||void 0===e?void 0:e.value),children:n.help&&(0,R.jsx)(v.dT,{children:(0,R.jsx)(f.ZP,{content:n.help,placement:h.ug.TOP_RIGHT})})}),(0,R.jsxs)(V,{className:d?"focused":"",children:[(0,R.jsx)(b.Z,{type:"number",inputRef:this.inputRef,value:s,onBlur:this.onBlur,onFocus:this.onFocus,onChange:this.onChange,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,disabled:o,"aria-label":n.label,overrides:{Input:{props:{step:this.getStep(),min:this.getMin(),max:this.getMax()},style:{lineHeight:"1.4",paddingRight:".5rem",paddingLeft:".5rem",paddingBottom:".5rem",paddingTop:".5rem"}},InputContainer:{style:function(){return{borderTopRightRadius:0,borderBottomRightRadius:0}}},Root:{style:function(){return{borderTopRightRadius:0,borderBottomRightRadius:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:0}}}}}),(0,R.jsxs)(k,{children:[(0,R.jsx)(C,{className:"step-down",onClick:this.modifyValueUsingStep("decrement"),disabled:p,children:(0,R.jsx)(g.ZP,{content:l.W,size:"xs",color:this.canDecrement?"inherit":"disabled"})}),(0,R.jsx)(C,{className:"step-up",onClick:this.modifyValueUsingStep("increment"),disabled:w,children:(0,R.jsx)(g.ZP,{content:u.v,size:"xs",color:this.canIncrement?"inherit":"disabled"})})]})]}),(0,R.jsx)(D,{children:(0,R.jsx)(y.Z,{dirty:c,value:s,className:"input-instructions"})})]})}}]),n}(s.PureComponent)}}]);